#!/usr/bin/env bash

set -euo pipefail

TOOL_NAME="protoc-gen-connect-openapi"
GH_REPO="https://github.com/sudorandom/protoc-gen-connect-openapi"

# Determine platform
os="$(uname -s | tr '[:upper:]' '[:lower:]')"
arch="$(uname -m)"

case "$arch" in
x86_64) arch="amd64" ;;
aarch64) arch="arm64" ;;
arm64) arch="arm64" ;;
esac

if [ "$os" = "darwin" ]; then
	platform="darwin_all"
else
	platform="${os}_${arch}"
fi

# shellcheck source=./lib/utils.bash
source "${plugin_dir}/lib/utils.bash"

# Install
install_path="$(dirname "$ASDF_INSTALL_PATH")/bin"
install_version version "$ASDF_INSTALL_VERSION" "$install_path"

echo "$TOOL_NAME $ASDF_INSTALL_VERSION installation was successful!"
